<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leadfinder - AI-Powered Lead Discovery</title>
    <link rel="icon" type="image/png" href="LinkedIn_Image_Template__15_-removebg-preview.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-primary': '#1a1a2e',
                        'dark-secondary': '#16213e',
                        'dark-tertiary': '#0f3460',
                        'accent-cyan': '#00d4aa',
                        'accent-teal': '#4ecdc4',
                    }
                }
            }
        }
    </script>
    <style>
        .score-circle {
            background: conic-gradient(from 0deg, #00d4aa 0deg, #00d4aa var(--score-deg), #374151 var(--score-deg), #374151 360deg);
        }
        .step-item {
            transition: all 0.3s ease-in-out;
        }
        
        .step-item:hover {
            background-color: rgba(15, 52, 96, 0.3);
            border-radius: 8px;
            padding: 8px;
            margin: -8px;
        }
        
        #loadingTip {
            transition: opacity 0.3s ease-in-out;
        }
        
        #progressBar {
            transition: all 0.5s ease-out;
            position: relative;
        }

        .company-context {
            line-height: 1.6;
            margin-top: 0.75rem;
        }
        
        .verification-badge {
            background: linear-gradient(135deg, #00d4aa, #4ecdc4);
            box-shadow: 0 2px 4px rgba(0, 212, 170, 0.3);
        }
        
        .verification-badge svg {
            filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
        }

    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Header -->
    <header class="bg-dark-primary border-b border-gray-700 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 bg-accent-cyan rounded-lg flex items-center justify-center">
                    <svg class="w-5 h-5 text-dark-primary" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <h1 class="text-xl font-semibold text-white">Leadfinder Tool</h1>
            </div>
            
            <div class="flex items-center space-x-4">
                <button id="searchHistoryBtn" class="flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary hover:bg-dark-tertiary transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>Recent Searches</span>
                    <span class="bg-accent-cyan text-dark-primary px-2 py-1 rounded-full text-xs font-medium">3</span>
                </button>
                
                <div class="flex items-center space-x-2 px-3 py-2 rounded-lg bg-dark-secondary">
                    <svg class="w-4 h-4 text-accent-cyan" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-.293.707L12 11.414V15a1 1 0 01-.293.707l-2 2A1 1 0 018 17v-5.586L3.293 6.707A1 1 0 013 6V4z"/>
                    </svg>
                    <span class="text-accent-cyan font-medium">15 CREDITS</span>
                    <span class="text-gray-400">‚Ä¢ LinkedIn Search</span>
                </div>
                
                <button class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors">
                    Log Out
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Search Form -->
            <div class="lg:col-span-1">
                <div class="bg-dark-secondary rounded-xl p-6">
                    <h2 class="text-xl font-semibold mb-6 text-white">Find Talent</h2>
                    <p class="text-gray-300 mb-6">Search for candidates from LinkedIn with AI-powered ranking</p>
                    
                    <form id="searchForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Job Title / Role</label>
                            <input type="text" id="jobTitle" placeholder="e.g. Restaurant Manager, Cashier, Cook" 
                                   class="w-full px-4 py-3 bg-dark-primary border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-accent-cyan focus:outline-none">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Industry</label>
                            <select id="industry" class="w-full px-4 py-3 bg-dark-primary border border-gray-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none">
                                <option value="">Select Industry</option>
                                <option value="hospitality">Hospitality & Tourism</option>
                                <option value="retail">Retail & Commerce</option>
                                <option value="food-beverage">Food & Beverage</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="technology">Technology</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="finance">Finance</option>
                                <option value="education">Education</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Location</label>
                            <select id="location" class="w-full px-4 py-3 bg-dark-primary border border-gray-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none">
                                <option value="">Select Location</option>
                                <option value="jakarta">Jakarta</option>
                                <option value="surabaya">Surabaya</option>
                                <option value="bandung">Bandung</option>
                                <option value="medan">Medan</option>
                                <option value="semarang">Semarang</option>
                                <option value="makassar">Makassar</option>
                                <option value="palembang">Palembang</option>
                                <option value="tangerang">Tangerang</option>
                                <option value="depok">Depok</option>
                                <option value="bekasi">Bekasi</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-2">Experience Level</label>
                            <select id="experience" class="w-full px-4 py-3 bg-dark-primary border border-gray-600 rounded-lg text-white focus:border-accent-cyan focus:outline-none">
                                <option value="">Any Experience</option>
                                <option value="entry">Entry Level (0-2 years)</option>
                                <option value="mid">Mid Level (3-5 years)</option>
                                <option value="senior">Senior Level (6+ years)</option>
                                <option value="manager">Management Level</option>
                            </select>
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" id="searchBtn" class="w-full bg-accent-cyan hover:bg-accent-teal text-dark-primary font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                <span>Search Talent</span>
                            </button>
                            <p class="text-sm text-gray-400 mt-2 text-center">üîç AI will match candidates against your criteria (Uses 1 credit)</p>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Results Area -->
            <div class="lg:col-span-2">
                <!-- Initial State -->
                <div id="initialState" class="bg-dark-secondary rounded-xl p-8 text-center">
                    <div class="w-16 h-16 bg-accent-cyan/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-accent-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold text-white mb-2">Ready to Find Talent</h3>
                    <p class="text-gray-400 mb-6">Fill in the search criteria and AI will find the best matching candidates across multiple platforms</p>
                    <div class="flex justify-center">
                        <button id="sampleSearchBtn" class="px-6 py-2 bg-dark-primary hover:bg-dark-tertiary rounded-lg text-accent-cyan border border-accent-cyan transition-colors">
                            Try Sample Search
                        </button>
                    </div>
                </div>
                
                <!-- Loading State -->
                <div id="loadingState" class="bg-dark-secondary rounded-xl p-8 text-center hidden">
                    <div class="animate-spin w-12 h-12 border-4 border-accent-cyan border-t-transparent rounded-full mx-auto mb-4"></div>
                    <h3 class="text-xl font-semibold text-white mb-2">AI-Powered Talent Discovery</h3>
                    <p class="text-gray-400 mb-6">Searching LinkedIn and analyzing candidates with artificial intelligence</p>
                    
                    <!-- Progress Bar -->
                    <div class="mb-6">
                        <div class="flex justify-between text-sm text-gray-300 mb-2">
                            <span>Progress</span>
                            <span id="progressPercentage">0%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-3">
                            <div id="progressBar" class="bg-gradient-to-r from-accent-cyan to-accent-teal h-3 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Detailed Steps -->
                    <div class="bg-dark-primary rounded-lg p-4">
                        <div class="text-sm text-gray-300 space-y-3" id="loadingSteps">
                            <div class="flex items-center justify-between step-item" data-step="1">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">1</div>
                                    <span>Initializing LinkedIn search parameters</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="2">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">2</div>
                                    <span>Searching LinkedIn professional profiles</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="3">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">3</div>
                                    <span>Extracting candidate information</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">4</div>
                                    <span>Running AI analysis and scoring</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="5">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">5</div>
                                    <span>Evaluating role and experience match</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="6">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">6</div>
                                    <span>Ranking candidates by compatibility</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                            <div class="flex items-center justify-between step-item" data-step="7">
                                <div class="flex items-center space-x-3">
                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center text-xs text-white">7</div>
                                    <span>Finalizing results and recommendations</span>
                                </div>
                                <span class="text-gray-500">‚è∏ Pending</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Fun Facts -->
                    <div class="mt-4 text-xs text-gray-400" id="loadingTip">
                        üí° Tip: Higher AI scores indicate better role compatibility
                    </div>
                </div>
                
                <!-- Results State -->
                <div id="resultsState" class="hidden">
                    <div class="bg-dark-secondary rounded-xl p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-xl font-semibold text-white">Search Results</h3>
                                <p class="text-gray-400">Found 8 candidates matching "Restaurant Manager in Jakarta"</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <select class="px-3 py-2 bg-dark-primary border border-gray-600 rounded-lg text-white text-sm">
                                    <option>Sort by Score</option>
                                    <option>Sort by Experience</option>
                                    <option>Sort by Location</option>
                                </select>
                                <button id="exportBtn" class="px-4 py-2 bg-accent-cyan hover:bg-accent-teal text-dark-primary font-medium rounded-lg transition-colors flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    <span>Export</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Filter Bar -->
                        <div class="flex items-center space-x-4 p-3 bg-dark-primary rounded-lg">
                            <input type="text" placeholder="Filter by name, title, skills..." class="flex-1 px-3 py-2 bg-transparent text-white placeholder-gray-400 border-none outline-none">
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-gray-400">Min Score:</span>
                                <input type="range" min="0" max="100" value="0" class="w-24">
                                <span class="text-sm text-accent-cyan">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Candidate Cards -->
                    <div class="space-y-4">
                        <!-- Sample Candidate 1 -->
                        <div class="bg-dark-secondary rounded-xl p-6 hover:bg-dark-tertiary transition-colors cursor-pointer candidate-card">
                            <div class="flex items-start justify-between">
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">AS</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="text-lg font-semibold text-white">Ahmad Suharto</h4>
                                            <span class="px-2 py-1 bg-accent-cyan/20 text-accent-cyan text-xs rounded">JobStreet</span>
                                        </div>
                                        <p class="text-gray-300 mb-2">Restaurant Manager ‚Ä¢ 8 years experience</p>
                                        <p class="text-gray-400 text-sm mb-3">Jakarta Selatan ‚Ä¢ Hospitality & Tourism</p>
                                        <p class="text-gray-300 text-sm">Experienced restaurant manager with strong leadership in fine dining establishments. Proven track record in team management, cost control, and customer satisfaction...</p>
                                        <div class="flex items-center space-x-4 mt-3">
                                            <span class="text-xs text-gray-400">LinkedIn Profile Available</span>
                                            <span class="text-xs text-gray-400">Last Updated: 2 days ago</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center ml-4">
                                    <div class="relative w-16 h-16 mb-2">
                                        <div class="w-16 h-16 rounded-full score-circle flex items-center justify-center" style="--score-deg: 306deg">
                                            <div class="w-12 h-12 bg-dark-secondary rounded-full flex items-center justify-center">
                                                <span class="text-accent-cyan font-bold text-sm">85</span>
                                            </div>
                                        </div>
                                    </div>
                                    <span class="text-xs text-gray-400">AI Score</span>
                                </div>
                            </div>
                        </div>
                    <!-- Sample Candidate 2 -->
                        <div class="bg-dark-secondary rounded-xl p-6 hover:bg-dark-tertiary transition-colors cursor-pointer candidate-card">
                            <div class="flex items-start justify-between">
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">SP</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="text-lg font-semibold text-white">Sari Permata</h4>
                                            <span class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">LinkedIn</span>
                                        </div>
                                        <p class="text-gray-300 mb-2">Operations Manager ‚Ä¢ 6 years experience</p>
                                        <p class="text-gray-400 text-sm mb-3">Jakarta Pusat ‚Ä¢ Food & Beverage</p>
                                        <p class="text-gray-300 text-sm">Dynamic operations manager specializing in restaurant chains and franchise management. Expert in process optimization, staff training, and quality control...</p>
                                        <div class="flex items-center space-x-4 mt-3">
                                            <span class="text-xs text-gray-400">Full Profile Available</span>
                                            <span class="text-xs text-gray-400">Last Updated: 1 week ago</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center ml-4">
                                    <div class="relative w-16 h-16 mb-2">
                                        <div class="w-16 h-16 rounded-full score-circle flex items-center justify-center" style="--score-deg: 280deg">
                                            <div class="w-12 h-12 bg-dark-secondary rounded-full flex items-center justify-center">
                                                <span class="text-accent-cyan font-bold text-sm">78</span>
                                            </div>
                                        </div>
                                    </div>
                                    <span class="text-xs text-gray-400">AI Score</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sample Candidate 3 -->
                        <div class="bg-dark-secondary rounded-xl p-6 hover:bg-dark-tertiary transition-colors cursor-pointer candidate-card">
                            <div class="flex items-start justify-between">
                                <div class="flex items-start space-x-4 flex-1">
                                    <div class="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                                        <span class="text-white font-semibold">BD</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="text-lg font-semibold text-white">Budi Darma</h4>
                                            <span class="px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded">Karir.com</span>
                                        </div>
                                        <p class="text-gray-300 mb-2">F&B Supervisor ‚Ä¢ 5 years experience</p>
                                        <p class="text-gray-400 text-sm mb-3">Jakarta Barat ‚Ä¢ Food & Beverage</p>
                                        <p class="text-gray-300 text-sm">Dedicated food service supervisor with experience in hotel restaurants and catering. Strong background in inventory management and team coordination...</p>
                                        <div class="flex items-center space-x-4 mt-3">
                                            <span class="text-xs text-gray-400">Contact Info Available</span>
                                            <span class="text-xs text-gray-400">Last Updated: 3 days ago</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center ml-4">
                                    <div class="relative w-16 h-16 mb-2">
                                        <div class="w-16 h-16 rounded-full score-circle flex items-center justify-center" style="--score-deg: 252deg">
                                            <div class="w-12 h-12 bg-dark-secondary rounded-full flex items-center justify-center">
                                                <span class="text-accent-cyan font-bold text-sm">70</span>
                                            </div>
                                        </div>
                                    </div>
                                    <span class="text-xs text-gray-400">AI Score</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Candidate Detail Modal -->
    <div id="candidateModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-dark-secondary rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto">
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center">
                            <span class="text-white font-bold text-lg">AS</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-white">Ahmad Suharto</h2>
                            <p class="text-gray-300">Restaurant Manager ‚Ä¢ 8 years experience</p>
                            <p class="text-gray-400">Jakarta Selatan ‚Ä¢ Available for Contact</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-center">
                            <div class="relative w-20 h-20 mb-2">
                                <div class="w-20 h-20 rounded-full score-circle flex items-center justify-center" style="--score-deg: 306deg">
                                    <div class="w-16 h-16 bg-dark-secondary rounded-full flex items-center justify-center">
                                        <span class="text-accent-cyan font-bold text-lg">85</span>
                                    </div>
                                </div>
                            </div>
                            <span class="text-sm text-gray-400">AI Match Score</span>
                        </div>
                        <button id="closeModal" class="text-gray-400 hover:text-white">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="p-6 space-y-6">
                <!-- AI Analysis Summary -->
                <div class="bg-dark-primary rounded-lg p-4">
                    <h3 class="text-lg font-semibold text-white mb-3 flex items-center">
                        <svg class="w-5 h-5 text-accent-cyan mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        AI Analysis Summary
                    </h3>
                    <p class="text-gray-300 mb-4">Strong match for Restaurant Manager position with excellent leadership experience and location compatibility. Recommended for immediate contact.</p>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <span class="text-sm text-gray-400">Role Relevance</span>
                            <div class="flex items-center space-x-2 mt-1">
                                <div class="flex-1 bg-gray-600 rounded-full h-2">
                                    <div class="bg-accent-cyan h-2 rounded-full" style="width: 90%"></div>
                                </div>
                                <span class="text-sm text-accent-cyan">90%</span>
                            </div>
                        </div>
                        <div>
                            <span class="text-sm text-gray-400">Experience Match</span>
                            <div class="flex items-center space-x-2 mt-1">
                                <div class="flex-1 bg-gray-600 rounded-full h-2">
                                    <div class="bg-accent-cyan h-2 rounded-full" style="width: 85%"></div>
                                </div>
                                <span class="text-sm text-accent-cyan">85%</span>
                            </div>
                        </div>
                        <div>
                            <span class="text-sm text-gray-400">Location Fit</span>
                            <div class="flex items-center space-x-2 mt-1">
                                <div class="flex-1 bg-gray-600 rounded-full h-2">
                                    <div class="bg-accent-cyan h-2 rounded-full" style="width: 95%"></div>
                                </div>
                                <span class="text-sm text-accent-cyan">95%</span>
                            </div>
                        </div>
                        <div>
                            <span class="text-sm text-gray-400">Profile Quality</span>
                            <div class="flex items-center space-x-2 mt-1">
                                <div class="flex-1 bg-gray-600 rounded-full h-2">
                                    <div class="bg-accent-cyan h-2 rounded-full" style="width: 70%"></div>
                                </div>
                                <span class="text-sm text-accent-cyan">70%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Profile Details -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3">Profile Summary</h4>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-400">Experience:</span>
                                <span class="text-white">8 years in hospitality</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Current Role:</span>
                                <span class="text-white">Restaurant Manager</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Location:</span>
                                <span class="text-white">Jakarta Selatan</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Source:</span>
                                <span class="text-accent-cyan">JobStreet Indonesia</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-400">Profile Updated:</span>
                                <span class="text-white">2 days ago</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-3">Key Strengths</h4>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                                <span class="text-gray-300 text-sm">Team Leadership & Management</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                                <span class="text-gray-300 text-sm">Fine Dining Experience</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                                <span class="text-gray-300 text-sm">Cost Control & Budget Management</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                                            <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                                <span class="text-gray-300 text-sm">Customer Service Excellence</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                                <span class="text-gray-300 text-sm">Multi-location Experience</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Potential Concerns -->
                <div class="bg-yellow-900/20 border border-yellow-600/30 rounded-lg p-4">
                    <h4 class="text-lg font-semibold text-yellow-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                        </svg>
                        Potential Considerations
                    </h4>
                    <div class="space-y-2 text-sm text-yellow-100">
                        <div class="flex items-start space-x-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Profile hasn't been updated in 2 weeks - may indicate job satisfaction</span>
                        </div>
                        <div class="flex items-start space-x-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Current employment status unclear - may require verification</span>
                        </div>
                        <div class="flex items-start space-x-2">
                            <span class="text-yellow-400">‚Ä¢</span>
                            <span>Limited contact information available on public profile</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recommendation -->
                <div class="bg-accent-cyan/10 border border-accent-cyan/30 rounded-lg p-4">
                    <h4 class="text-lg font-semibold text-accent-cyan mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                        AI Recommendation
                    </h4>
                    <p class="text-gray-300 text-sm">
                        <strong>High Priority Contact:</strong> Ahmad shows excellent alignment with restaurant management requirements. 
                        Recommend reaching out with a personalized message highlighting career growth opportunities and competitive compensation. 
                        Best contact approach: LinkedIn message or professional email during business hours.
                    </p>
                </div>
                
                <!-- Contact Actions -->
                <div class="flex items-center justify-between pt-4 border-t border-gray-700">
                    <div class="flex items-center space-x-4">
                        <button class="px-6 py-3 bg-accent-cyan hover:bg-accent-teal text-dark-primary font-semibold rounded-lg transition-colors flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            <span>Export Profile</span>
                        </button>
                        <button class="px-6 py-3 bg-dark-primary hover:bg-dark-tertiary text-white border border-gray-600 rounded-lg transition-colors flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
                            </svg>
                            <span>Share Profile</span>
                        </button>
                        <button class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                            </svg>
                            <span>Send to Recruitment Tool</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search History Modal -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-dark-secondary rounded-xl max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6 border-b border-gray-700">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold text-white">Search History</h2>
                    <button id="closeHistoryModal" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-dark-primary rounded-lg p-4 hover:bg-dark-tertiary transition-colors cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-semibold text-white">Restaurant Manager in Jakarta</h3>
                        <span class="text-sm text-gray-400">2 hours ago</span>
                    </div>
                    <p class="text-sm text-gray-300 mb-2">Hospitality & Tourism ‚Ä¢ Entry to Mid Level</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-accent-cyan">8 candidates found</span>
                        <button class="text-xs text-gray-400 hover:text-accent-cyan">Rerun Search</button>
                    </div>
                </div>
                
                <div class="bg-dark-primary rounded-lg p-4 hover:bg-dark-tertiary transition-colors cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-semibold text-white">Cashier in Surabaya</h3>
                        <span class="text-sm text-gray-400">1 day ago</span>
                    </div>
                    <p class="text-sm text-gray-300 mb-2">Retail & Commerce ‚Ä¢ Entry Level</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-accent-cyan">12 candidates found</span>
                        <button class="text-xs text-gray-400 hover:text-accent-cyan">Rerun Search</button>
                    </div>
                </div>
                
                <div class="bg-dark-primary rounded-lg p-4 hover:bg-dark-tertiary transition-colors cursor-pointer">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-semibold text-white">Cook in Bandung</h3>
                        <span class="text-sm text-gray-400">3 days ago</span>
                    </div>
                    <p class="text-sm text-gray-300 mb-2">Food & Beverage ‚Ä¢ Mid Level</p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-accent-cyan">6 candidates found</span>
                        <button class="text-xs text-gray-400 hover:text-accent-cyan">Rerun Search</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-dark-secondary rounded-xl max-w-md w-full">
            <div class="p-6 border-b border-gray-700">
                <h2 class="text-xl font-bold text-white">Export Results</h2>
                <p class="text-gray-400 text-sm mt-1">Choose export format for your search results</p>
            </div>
            <div class="p-6 space-y-4">
                <button class="w-full p-4 bg-dark-primary hover:bg-dark-tertiary rounded-lg transition-colors flex items-center space-x-3">
                    <svg class="w-8 h-8 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                    </svg>
                    <div class="text-left">
                        <div class="font-medium text-white">PDF Report</div>
                        <div class="text-sm text-gray-400">Detailed profiles with AI analysis</div>
                    </div>
                </button>
                
                <button class="w-full p-4 bg-dark-primary hover:bg-dark-tertiary rounded-lg transition-colors flex items-center space-x-3">
                    <svg class="w-8 h-8 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                    <div class="text-left">
                        <div class="font-medium text-white">CSV Spreadsheet</div>
                        <div class="text-sm text-gray-400">Contact info and basic details</div>
                    </div>
                </button>
                
                <button class="w-full p-4 bg-dark-primary hover:bg-dark-tertiary rounded-lg transition-colors flex items-center space-x-3">
                    <svg class="w-8 h-8 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z"/>
                        <path d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z"/>
                    </svg>
                    <div class="text-left">
                        <div class="font-medium text-white">Copy to Clipboard</div>
                        <div class="text-sm text-gray-400">Quick paste into other tools</div>
                    </div>
                </button>
            </div>
            <div class="p-6 border-t border-gray-700 flex justify-end">
                <button id="closeExportModal" class="px-4 py-2 text-gray-400 hover:text-white">Cancel</button>
            </div>
        </div>
    </div>

<script>
        // State management
        let currentSearchResults = [];
        let currentCandidates = [];
        let searchHistory = JSON.parse(localStorage.getItem('leadfinder_history') || '[]');
        
        // DOM elements
        const searchForm = document.getElementById('searchForm');
        const initialState = document.getElementById('initialState');
        const loadingState = document.getElementById('loadingState');
        const resultsState = document.getElementById('resultsState');
        const candidateModal = document.getElementById('candidateModal');
        const historyModal = document.getElementById('historyModal');
        const exportModal = document.getElementById('exportModal');
        
        // Event listeners
        searchForm.addEventListener('submit', handleSearch);
        document.getElementById('searchHistoryBtn').addEventListener('click', () => historyModal.classList.remove('hidden'));
        document.getElementById('exportBtn').addEventListener('click', () => exportModal.classList.remove('hidden'));
        document.getElementById('closeModal').addEventListener('click', () => candidateModal.classList.add('hidden'));
        document.getElementById('closeHistoryModal').addEventListener('click', () => historyModal.classList.add('hidden'));
        document.getElementById('closeExportModal').addEventListener('click', () => exportModal.classList.add('hidden'));
        
        // Sample search button
        document.getElementById('sampleSearchBtn').addEventListener('click', () => {
            document.getElementById('jobTitle').value = 'Restaurant Manager';
            document.getElementById('industry').value = 'hospitality';
            document.getElementById('location').value = 'jakarta';
            document.getElementById('experience').value = 'mid';
        });
        
        // Add click handlers for candidate cards
        document.addEventListener('click', (e) => {
            if (e.target.closest('.candidate-card')) {
                candidateModal.classList.remove('hidden');
            }
        });
        
        // Handle search form submission
        async function handleSearch(e) {
            e.preventDefault();
    
            const formData = new FormData(searchForm);
            const searchParams = {
                jobTitle: formData.get('jobTitle') || document.getElementById('jobTitle').value,
                industry: formData.get('industry') || document.getElementById('industry').value,
                location: formData.get('location') || document.getElementById('location').value,
                experience: formData.get('experience') || document.getElementById('experience').value
            };
            
            // Validate required fields
            if (!searchParams.jobTitle) {
                alert('Please enter a job title or role');
                return;
            }
            
            // Show loading state
            initialState.classList.add('hidden');
            resultsState.classList.add('hidden');
            loadingState.classList.remove('hidden');
            
            // Start enhanced loading animation (ADD THIS LINE)
            const loadingPromise = showEnhancedLoading();
            
            try {
                // REAL N8N WEBHOOK CALL
                const response = await fetch('https://montpro.app.n8n.cloud/webhook-test/leadfinder-tool', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json' 
                    },
                    body: JSON.stringify(searchParams)
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
            
                // Wait for loading animation to complete
                await loadingPromise;
                
                if (data.success) {
                    processSearchResults(data);
                    loadingState.classList.add('hidden');
                    resultsState.classList.remove('hidden');
                }
                
            } catch (error) {
                console.error('Search failed:', error);
                loadingState.classList.add('hidden');
                initialState.classList.remove('hidden');
                alert(`Search failed: ${error.message}`);
            }
        }
        
        // NEW FUNCTION: Process real backend results
        function processSearchResults(data) {
            // Store candidates globally for modal access
            currentCandidates = data.results.candidates;
            // Update results description
            const resultsTitle = document.querySelector('#resultsState h3');
            const resultsDesc = document.querySelector('#resultsState p');
            
            if (resultsTitle && resultsDesc) {
                resultsTitle.textContent = 'Search Results';
                resultsDesc.textContent = `Found ${data.results.totalFound} candidates matching "${data.query.jobTitle}" in ${data.query.location}`;
            }
            
            // Update candidate cards with real data
            updateCandidateCards(data.results.candidates);
            
            // Update analytics if you have an analytics section
            updateAnalytics(data.analytics);

        }
        
        // NEW FUNCTION: Update candidate cards
        function updateCandidateCards(candidates) {
            const cardsContainer = document.querySelector('#resultsState .space-y-4');
            
            if (!cardsContainer) return;
            
            // Clear existing mock cards
            cardsContainer.innerHTML = '';
            
            // Create real candidate cards
            candidates.forEach(candidate => {
                const cardHTML = createCandidateCardHTML(candidate);
                cardsContainer.innerHTML += cardHTML;
            });
            
            // Re-attach click handlers
            attachCandidateCardHandlers(candidates);
        }
        
        // NEW FUNCTION: Create candidate card HTML
        function createCandidateCardHTML(candidate) {
            const scorePercentage = (candidate.aiScore * 3.6); // Convert to degrees for speedometer
            
            return `
                <div class="bg-dark-secondary rounded-xl p-6 hover:bg-dark-tertiary transition-colors cursor-pointer candidate-card" data-candidate-id="${candidate.id}">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-4 flex-1">
                            <div class="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold">${candidate.name.split(' ').map(n => n[0]).join('').substring(0, 2)}</span>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-1">
                                    <h4 class="text-lg font-semibold text-white">${candidate.name}</h4>
                                    <span class="px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded">${candidate.source}</span>
                                </div>
                                <p class="text-gray-300 mb-2">${candidate.title}</p>
                                <p class="text-gray-400 text-sm mb-3">${candidate.location} ‚Ä¢ ${candidate.experience || 'Experienced professional'}</p>
                                <p class="text-gray-300 text-sm">${candidate.snippet}</p>
                                <div class="flex items-center space-x-4 mt-3">
                                    <span class="text-xs text-gray-400">Profile Available</span>
                                    <span class="text-xs text-gray-400">${candidate.lastUpdated}</span>
                                    ${candidate.verificationStatus === 'Verified' ? '<span class="text-xs text-accent-cyan flex items-center"><svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>Verified</span>' : ''}
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center ml-4">
                            <div class="relative w-16 h-16 mb-2">
                                <div class="w-16 h-16 rounded-full score-circle flex items-center justify-center" style="--score-deg: ${scorePercentage}deg">
                                    <div class="w-12 h-12 bg-dark-secondary rounded-full flex items-center justify-center">
                                        <span class="text-accent-cyan font-bold text-sm">${candidate.aiScore}</span>
                                    </div>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">AI Score</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // NEW FUNCTION: Attach click handlers to real cards
        function attachCandidateCardHandlers(candidates) {
            document.querySelectorAll('.candidate-card').forEach((card, index) => {
                card.addEventListener('click', () => {
                    const candidateId = card.getAttribute('data-candidate-id');
                    const candidate = candidates.find(c => c.id === candidateId);
                    if (candidate) {
                        showCandidateModal(candidate);
                    }
                });
            });
        }
        
        // NEW FUNCTION: Show modal with real candidate data
        // Real candidate modal function
        function showCandidateModal(candidate) {
            if (!candidate) return;
            
            // Update modal header
            updateModalHeader(candidate);
            
            // Update AI Analysis Summary
            updateModalAnalysis(candidate);
            
            // Update Profile Details
            updateModalProfile(candidate);
            
            // Update Key Strengths
            updateModalStrengths(candidate);
            
            // Update Concerns
            updateModalConcerns(candidate);
            
            // Update Recommendation
            updateModalRecommendation(candidate);
            
            // Show modal
            candidateModal.classList.remove('hidden');
        }

        function updateModalHeader(candidate) {
            // Update name and title
            const nameElement = candidateModal.querySelector('h2');
            const titleElement = candidateModal.querySelector('p.text-gray-300');
            const locationElement = candidateModal.querySelector('p.text-gray-400');
            
            if (nameElement) nameElement.textContent = candidate.name;
            if (titleElement) titleElement.textContent = `${candidate.title} ‚Ä¢ ${candidate.experience || 'Experienced professional'}`;
            if (locationElement) {
                const contactStatus = candidate.verificationStatus === 'Verified' ? 'Verified Profile' : 'Profile Available';
                locationElement.textContent = `${candidate.location} ‚Ä¢ ${contactStatus}`;
            }
            
            // Update score circle
            const scoreElement = candidateModal.querySelector('.text-accent-cyan.font-bold.text-lg');
            const scoreCircle = candidateModal.querySelector('.score-circle');
            
            if (scoreElement) scoreElement.textContent = candidate.aiScore;
            if (scoreCircle) {
                const scoreDegrees = candidate.aiScore * 3.6;
                scoreCircle.style.setProperty('--score-deg', `${scoreDegrees}deg`);
            }
            
            // Update initials
            const initialsElement = candidateModal.querySelector('.w-16.h-16 span');
            if (initialsElement) {
                const initials = candidate.name.split(' ').map(n => n[0]).join('').substring(0, 2);
                initialsElement.textContent = initials;
            }
        }

        function updateModalAnalysis(candidate) {
            // Update AI analysis summary text
            const summaryText = candidateModal.querySelector('.bg-dark-primary p.text-gray-300');
            if (summaryText) {
                summaryText.textContent = candidate.recommendation || 'AI analysis based on profile matching and experience relevance.';
            }
            
            // Update score breakdown bars
            const scoreBreakdown = candidate.scoreBreakdown || {};
            updateScoreBar('Role Relevance', scoreBreakdown.roleRelevance || 0);
            updateScoreBar('Experience Match', scoreBreakdown.experienceMatch || 0);
            updateScoreBar('Location Fit', scoreBreakdown.locationFit || 0);
            updateScoreBar('Profile Quality', scoreBreakdown.profileQuality || 0);
        }
        
        function updateScoreBar(label, score) {
            const scoreElements = candidateModal.querySelectorAll('.grid.grid-cols-2 > div');
            
            scoreElements.forEach(element => {
                const labelElement = element.querySelector('.text-gray-400');
                if (labelElement && labelElement.textContent === label) {
                    const progressBar = element.querySelector('.bg-accent-cyan');
                    const scoreText = element.querySelector('.text-accent-cyan');
                    
                    if (progressBar) progressBar.style.width = `${score}%`;
                    if (scoreText) scoreText.textContent = `${score}%`;
                }
            });
        }
        
        function updateModalProfile(candidate) {
            const profileSection = candidateModal.querySelector('.grid.grid-cols-1.md\\:grid-cols-2 > div:first-child');
            if (!profileSection) return;
            
            const profileData = [
                ['Experience:', candidate.experience || 'Experienced professional'],
                ['Current Role:', candidate.title],
                ['Location:', candidate.location],
                ['Source:', candidate.source],
                ['Profile Updated:', candidate.lastUpdated]
            ];
            
            const profileContent = profileSection.querySelector('.space-y-3');
            if (profileContent) {
                profileContent.innerHTML = `
                    ${profileData.map(([label, value]) => `
                        <div class="flex justify-between">
                            <span class="text-gray-400">${label}</span>
                            <span class="text-white">${value}</span>
                        </div>
                    `).join('')}
                    
                    ${candidate.companyContext ? `
                        <div class="pt-3 border-t border-gray-600">
                            <span class="text-gray-400 block mb-2">Company Context:</span>
                            <span class="text-white text-sm leading-relaxed">${candidate.companyContext}</span>
                        </div>
                    ` : ''}
                    
                    <div class="flex justify-between items-center pt-2">
                        <span class="text-gray-400">Verification:</span>
                        <div class="flex items-center space-x-2">
                            ${candidate.verificationStatus === 'Verified' ? `
                                <div class="flex items-center space-x-1 bg-accent-cyan/20 text-accent-cyan px-2 py-1 rounded-full">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.238.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    <span class="text-sm font-medium">Verified</span>
                                </div>
                            ` : `
                                <span class="text-yellow-400 text-sm">${candidate.verificationStatus || 'Unverified'}</span>
                            `}
                        </div>
                    </div>
                `;
            }
        }
        
        function updateModalStrengths(candidate) {
            const strengthsSection = candidateModal.querySelector('.grid.grid-cols-1.md\\:grid-cols-2 > div:last-child .space-y-2');
            if (!strengthsSection) return;
            
            const strengths = candidate.strengths || ['Professional background', 'Industry experience'];
            
            strengthsSection.innerHTML = strengths.map(strength => `
                <div class="flex items-center space-x-2">
                    <div class="w-2 h-2 bg-accent-cyan rounded-full"></div>
                    <span class="text-gray-300 text-sm">${strength}</span>
                </div>
            `).join('');
        }
        
        function updateModalConcerns(candidate) {
            const concernsSection = candidateModal.querySelector('.bg-yellow-900\\/20 .space-y-2');
            if (!concernsSection) return;
            
            const concerns = candidate.concerns || ['Profile verification recommended before contact'];
            
            concernsSection.innerHTML = concerns.map(concern => `
                <div class="flex items-start space-x-2">
                    <span class="text-yellow-400">‚Ä¢</span>
                    <span>${concern}</span>
                </div>
            `).join('');
        }
        
        function updateModalRecommendation(candidate) {
            const recommendationSection = candidateModal.querySelector('.bg-accent-cyan\\/10 p.text-gray-300');
            if (!recommendationSection) return;
            
            const priority = candidate.priority || 'medium';
            const recommendation = candidate.recommendation || 'Review profile for potential match';
            
            recommendationSection.innerHTML = `
                <strong>${priority.charAt(0).toUpperCase() + priority.slice(1)} Priority Contact:</strong> ${recommendation}
            `;
        }
        
        // Update the card click handler
        function attachCandidateCardHandlers(candidates) {
            document.querySelectorAll('.candidate-card').forEach((card, index) => {
                card.addEventListener('click', () => {
                    const candidateId = card.getAttribute('data-candidate-id');
                    const candidate = candidates.find(c => c.id === candidateId);
                    if (candidate) {
                        showCandidateModal(candidate);
                    }
                });
            });
        }
        
        // NEW FUNCTION: Update analytics display
        function updateAnalytics(analytics) {
            // Update any analytics displays you have
            console.log('Search Quality:', analytics.searchQuality);
            console.log('Recommended Action:', analytics.recommendedAction);
        }
        
        // Enhanced loading animation with realistic 40-60 second timing
        async function showEnhancedLoading() {
            const steps = [
                { 
                    step: 1, 
                    text: 'Initializing LinkedIn search parameters', 
                    delay: 2000, 
                    progress: 8,
                    tip: 'üîç Optimizing search criteria for best results'
                },
                { 
                    step: 2, 
                    text: 'Searching LinkedIn professional profiles', 
                    delay: 8000, 
                    progress: 25,
                    tip: 'üåê Scanning thousands of LinkedIn profiles in Indonesia'
                },
                { 
                    step: 3, 
                    text: 'Extracting candidate information', 
                    delay: 15000, 
                    progress: 40,
                    tip: 'üìä Processing profile data and work history'
                },
                { 
                    step: 4, 
                    text: 'Running AI analysis and scoring', 
                    delay: 25000, 
                    progress: 60,
                    tip: 'ü§ñ AI analyzing candidate qualifications and experience'
                },
                { 
                    step: 5, 
                    text: 'Evaluating role and experience match', 
                    delay: 35000, 
                    progress: 75,
                    tip: '‚ö° Calculating compatibility scores for each candidate'
                },
                { 
                    step: 6, 
                    text: 'Ranking candidates by compatibility', 
                    delay: 42000, 
                    progress: 90,
                    tip: 'üéØ Sorting candidates by best matches first'
                },
                { 
                    step: 7, 
                    text: 'Finalizing results and recommendations', 
                    delay: 48000, 
                    progress: 100,
                    tip: '‚ú® Preparing your personalized talent recommendations'
                }
            ];
            
            let previousDelay = 0;
            
            for (let stepData of steps) {
                await new Promise(resolve => setTimeout(resolve, stepData.delay - previousDelay));
                
                // Update progress bar
                updateProgressBar(stepData.progress);
                
                // Update step status to processing
                updateStepStatus(stepData.step, 'processing');
                
                // Update tip
                updateLoadingTip(stepData.tip);
                
                // Keep processing for a moment, then complete
                await new Promise(resolve => setTimeout(resolve, 800));
                updateStepStatus(stepData.step, 'complete');
                
                previousDelay = stepData.delay + 800;
            }
            
            // Final completion
            await new Promise(resolve => setTimeout(resolve, 500));
            updateLoadingTip('üéâ Search completed successfully! Displaying results...');
        }
        
        function updateProgressBar(percentage) {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressPercentage');
            
            if (progressBar) {
                progressBar.style.width = `${percentage}%`;
                // Simple glow effect without animation
                progressBar.style.boxShadow = `0 0 10px rgba(0, 212, 170, 0.4)`;
            }
            
            if (progressText) {
                // Smooth number counter
                const current = parseInt(progressText.textContent) || 0;
                const diff = percentage - current;
                const duration = 500;
                const steps = Math.abs(diff);
                const increment = diff / steps;
                const stepDuration = duration / steps;
                
                let count = 0;
                const timer = setInterval(() => {
                    count++;
                    const newValue = Math.round(current + (increment * count));
                    progressText.textContent = `${newValue}%`;
                    
                    if (count >= steps) {
                        clearInterval(timer);
                        progressText.textContent = `${percentage}%`;
                    }
                }, stepDuration);
            }
        }
        
        function updateStepStatus(stepNumber, status) {
            const stepElement = document.querySelector(`[data-step="${stepNumber}"]`);
            if (!stepElement) return;
            
            // Find the status span by looking for the span that contains "Pending" or other status text
            const allSpans = stepElement.querySelectorAll('span');
            let statusElement = null;
            
            // Find the span that contains status text (usually the last one)
            for (let i = allSpans.length - 1; i >= 0; i--) {
                if (allSpans[i].textContent.includes('Pending') || 
                    allSpans[i].textContent.includes('Processing') || 
                    allSpans[i].textContent.includes('Complete')) {
                    statusElement = allSpans[i];
                    break;
                }
            }
            
            // Find the number circle
            const numberCircle = stepElement.querySelector('.w-6.h-6.rounded-full');
            
            if (status === 'processing') {
                // Add hover effect to the whole step
                stepElement.classList.add('bg-dark-tertiary/30', 'rounded-lg', 'scale-[1.02]', 'transition-all');
                
                if (statusElement) {
                    statusElement.className = 'text-yellow-400 flex items-center';
                    statusElement.innerHTML = `
                        <svg class="w-4 h-4 mr-2 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Processing...
                    `;
                }
                
                if (numberCircle) {
                    numberCircle.className = 'w-6 h-6 rounded-full bg-yellow-500 flex items-center justify-center text-xs text-dark-primary font-semibold animate-pulse';
                }
                
            } else if (status === 'complete') {
                // Remove hover effect
                stepElement.classList.remove('bg-dark-tertiary/30', 'scale-[1.02]');
                
                if (statusElement) {
                    statusElement.className = 'text-accent-cyan flex items-center font-medium';
                    statusElement.innerHTML = `
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        Complete
                    `;
                }
                
                if (numberCircle) {
                    numberCircle.className = 'w-6 h-6 rounded-full bg-accent-cyan flex items-center justify-center text-xs text-dark-primary font-semibold';
                    numberCircle.innerHTML = `
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                        </svg>
                    `;
                }
            }
        }
        
        function updateLoadingTip(tip) {
            const tipElement = document.getElementById('loadingTip');
            if (tipElement) {
                tipElement.textContent = tip;
                
                // Add a subtle animation
                tipElement.style.opacity = '0';
                setTimeout(() => {
                    tipElement.style.opacity = '1';
                }, 100);
            }
        }

        function updateLoadingStep(stepText, status) {
            const statusContainer = document.querySelector('#loadingState .space-y-2');
            if (!statusContainer) return;
            
            const stepElements = statusContainer.querySelectorAll('.flex');
            
            stepElements.forEach(element => {
                const textSpan = element.querySelector('span:first-child');
                const statusSpan = element.querySelector('span:last-child');
                
                if (textSpan && textSpan.textContent === stepText) {
                    if (status === 'processing') {
                        statusSpan.className = 'text-yellow-400';
                        statusSpan.innerHTML = '‚è≥ Processing...';
                    } else if (status === 'complete') {
                        statusSpan.className = 'text-accent-cyan';
                        statusSpan.innerHTML = '‚úì Complete';
                    }
                }
            });
        }
        
        // Update results description based on search params
        function updateResultsDescription(params) {
            const resultsTitle = document.querySelector('#resultsState h3');
            const resultsDesc = document.querySelector('#resultsState p');
            
            if (resultsTitle && resultsDesc) {
                resultsDesc.textContent = `Found 8 candidates matching "${params.jobTitle}" in ${params.location || 'Indonesia'}`;
            }
        }
        
        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target === candidateModal) candidateModal.classList.add('hidden');
            if (e.target === historyModal) historyModal.classList.add('hidden');
            if (e.target === exportModal) exportModal.classList.add('hidden');
        });
        
        // Export functionality
        document.addEventListener('click', (e) => {
            if (e.target.closest('button') && e.target.closest('button').textContent.includes('PDF Report')) {
                handleExport('pdf');
            } else if (e.target.closest('button') && e.target.closest('button').textContent.includes('CSV Spreadsheet')) {
                handleExport('csv');
            } else if (e.target.closest('button') && e.target.closest('button').textContent.includes('Copy to Clipboard')) {
                handleExport('clipboard');
            }
        });
        
        // Handle different export types
        function handleExport(type) {
            switch (type) {
                case 'pdf':
                    // Generate PDF report
                    alert('PDF export functionality will be implemented with jsPDF');
                    break;
                case 'csv':
                    // Generate CSV download
                    downloadCSV();
                    break;
                case 'clipboard':
                    // Copy to clipboard
                    copyToClipboard();
                    break;
            }
            exportModal.classList.add('hidden');
        }
        
        // Download CSV function
        function downloadCSV() {
            const csvData = [
                ['Name', 'Title', 'Experience', 'Location', 'AI Score', 'Source'],
                ['Ahmad Suharto', 'Restaurant Manager', '8 years', 'Jakarta Selatan', '85', 'JobStreet'],
                ['Sari Permata', 'Operations Manager', '6 years', 'Jakarta Pusat', '78', 'LinkedIn'],
                ['Budi Darma', 'F&B Supervisor', '5 years', 'Jakarta Barat', '70', 'Karir.com']
            ];
            
            const csvContent = csvData.map(row => row.join(',')).join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.setAttribute('hidden', '');
            a.setAttribute('href', url);
            a.setAttribute('download', `leadfinder_results_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        // Copy to clipboard function
        function copyToClipboard() {
            const textData = `LEADFINDER SEARCH RESULTS
            
Ahmad Suharto - Restaurant Manager (8 years) - Jakarta Selatan - Score: 85
Sari Permata - Operations Manager (6 years) - Jakarta Pusat - Score: 78
Budi Darma - F&B Supervisor (5 years) - Jakarta Barat - Score: 70

Generated on: ${new Date().toLocaleDateString()}`;
            
            navigator.clipboard.writeText(textData).then(() => {
                alert('Results copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
        
        // Initialize search history display
        function updateSearchHistoryCount() {
            const historyBtn = document.getElementById('searchHistoryBtn');
            const countSpan = historyBtn.querySelector('span:last-child');
            if (countSpan) {
                countSpan.textContent = searchHistory.length.toString();
            }
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Escape key closes modals
            if (e.key === 'Escape') {
                candidateModal.classList.add('hidden');
                historyModal.classList.add('hidden');
                exportModal.classList.add('hidden');
            }
            
            // Ctrl/Cmd + Enter submits search
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                if (!loadingState.classList.contains('hidden')) return;
                handleSearch(e);
            }
        });
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            updateSearchHistoryCount();
            
            // Focus on job title input
            document.getElementById('jobTitle').focus();
            
            // Add loading animation to search button on hover
            const searchBtn = document.getElementById('searchBtn');
            searchBtn.addEventListener('mouseenter', () => {
                if (!searchBtn.disabled) {
                    searchBtn.classList.add('transform', 'scale-105');
                }
            });
            searchBtn.addEventListener('mouseleave', () => {
                searchBtn.classList.remove('transform', 'scale-105');
            });
        });
        
        // Mock API response structure for reference
        const mockApiResponse = {
            success: true,
            query: {
                jobTitle: "Restaurant Manager",
                industry: "hospitality",
                location: "jakarta",
                experience: "mid"
            },
            results: {
                totalFound: 8,
                candidates: [
                    {
                        id: "candidate_001",
                        name: "Ahmad Suharto",
                        title: "Restaurant Manager",
                        experience: "8 years",
                        location: "Jakarta Selatan",
                        industry: "Hospitality & Tourism",
                        snippet: "Experienced restaurant manager with strong leadership...",
                        profileUrl: "https://jobstreet.co.id/profile/ahmad-suharto",
                        source: "JobStreet",
                        aiScore: 85,
                        scoreBreakdown: {
                            roleRelevance: 90,
                            experienceMatch: 85,
                            locationFit: 95,
                            profileQuality: 70
                        },
                        lastUpdated: "2 days ago",
                        strengths: [
                            "Team Leadership & Management",
                            "Fine Dining Experience",
                            "Cost Control & Budget Management"
                        ],
                        concerns: [
                            "Profile hasn't been updated in 2 weeks",
                            "Current employment status unclear"
                        ]
                    }
                ]
            },
            searchId: "search_" + Date.now(),
            timestamp: new Date().toISOString()
        };
        
        // Function to handle real API integration
        async function callN8NWebhook(searchParams) {
            // Replace with your actual N8N webhook URL
            const webhookUrl = 'https://your-n8n-instance.com/webhook/leadfinder-search';
            
            try {
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: searchParams,
                        timestamp: new Date().toISOString(),
                        userId: 'current-user-id' // You'll get this from Supabase auth
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                return data;
                
            } catch (error) {
                console.error('N8N webhook call failed:', error);
                throw error;
            }
        }
    </script>
</body>
</html>
